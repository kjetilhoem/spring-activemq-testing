<?xml version="1.0" encoding="UTF-8"?>
<beans default-autowire="no" xmlns="http://www.springframework.org/schema/beans" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:jms="http://www.springframework.org/schema/jms" xmlns:task="http://www.springframework.org/schema/task"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx" 
    xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/jms http://www.springframework.org/schema/jms/spring-jms-3.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
    http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd">
    
    <tx:annotation-driven />
    
    <task:executor id="jms-consumers" keep-alive="60" pool-size="0-3" />
    
    <!-- p2p listening on queues -->
    <jms:listener-container task-executor="jms-consumers" message-converter="coreApiMarshallingMessageConverter">
        <jms:listener destination="ValidateEmailAddress" ref="consumer" method="validateEmailAddress" />
    </jms:listener-container>
    
    <!-- durable subscription on topic(s) using a wildcard-pattern -->
    <jms:listener-container task-executor="jms-consumers" destination-type="durableTopic" >
        <jms:listener destination="Stats.>" ref="consumer" method="eatStats"
            subscription="Statistics" />
    </jms:listener-container>
    
</beans>
